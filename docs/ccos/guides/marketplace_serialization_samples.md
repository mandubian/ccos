# Capability Marketplace Serialization Samples

The files in `docs/ccos/samples/` capture representative exports generated by
`CapabilityMarketplace::export_capabilities_to_rtfs_dir`. Each sample mirrors a
real round-trip scenario covered by the integration tests.

## Included samples

- [`http_capability_sample.rtfs`](../samples/http_capability_sample.rtfs)
  – Minimal HTTP provider export with network permissions.
- [`mcp_capability_sample.rtfs`](../samples/mcp_capability_sample.rtfs)
  – GitHub `list_issues` MCP tool with real pagination inputs and issue payload schema.
- [`openapi_capability_sample.rtfs`](../samples/openapi_capability_sample.rtfs)
  – OpenWeather endpoint showcasing query parameters, auth hints, and structured response data.

These snapshots match the formatting emitted by the exporter:

```rtfs
(capability "sample.openapi.weather"
  :name "OpenAPI Weather"
  :version "1.0.0"
  :description "Fetch current weather conditions from OpenWeather"
  :provider :openapi
  :provider-meta {:base_url "https://api.openweathermap.org" :timeout_ms 5000 :spec_url "https://spec.weather.example.com/openapi.json" :operations 1 :auth_type "api_key" :auth_location "header" }
  :metadata {
    :openapi_provider_kind "weather_api"
    :openapi_operation "GET /data/2.5/weather"
    :sample_tag "demo"
  }
  :permissions [:http:request]
  :effects [:network]
  :input-schema {
    :q :string ;; optional city name
    :lat :float ;; optional latitude
    :lon :float ;; optional longitude
    :units :string ;; optional ("standard", "metric", "imperial")
    :lang :string ;; optional language code
  }
  :output-schema {
    :coord {:lon :float :lat :float}
    :weather [:vector {:id :int :main :string :description :string :icon :string}]
    :main {:temp :float :feels_like :float :humidity :int}
    :wind {:speed :float :deg :int}
    :name :string
    :dt :int ;; unix timestamp
  }
  :implementation
    (fn [input]
      "Exported manifest only; runtime-managed execution"
      input)
)
```

> Tip: run `cargo run --bin demo_serialization` for a verbose walk-through of
> the same format, or point `export_capabilities_to_rtfs_dir` at a scratch
> directory to generate fresh snapshots from your own marketplace instance.
